<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    {{!--
    <pre>{{url}}</pre> --}}

    <h1>Museo Histórico y Natural de Lavalle</h1>
    <pre>{{portada.noticia.titular}}</pre>

    <img src={{portada.noticia.imagen}} alt="imagen">
    <p>{{portada.noticia.descripcion}}</p>

<hr>
<p><b>Agenda</b></p>
{{#each eventos}}
<p>{{this.fecha}}  {{this.descripcion}} {{this.cupo}}  {{this.estado}}</p>
{{/each}}
<hr>
    <h3>Formulario para Visitas</h3>
    <!--form action="/visitas" method="GET"-->
    <div>
        <label for="nombre">Nombre Completo:</label><br>
        <input type="text" id="nombre" name="nombre" required><br><br>

        <label for="email">Correo Electrónico:</label><br>
        <input type="email" id="email" name="email" required><br><br>

        <label for="numCelu">Teléfono de contacto:</label><br>
        <input type="text" id="numtel" name="numtel" required><br><br>

        <label for="fechaVisita">Fecha de Visita:</label><br>
        <input type="date" id="fechaVisita" name="fechaVisita" required><br><br>

        <label for="cantidadPer">Cantidad de Personas:</label><br>
        <input type="number" id="cantidadPer" name="cantidadPer" min="1" required><br><br>

        <label for="guia">¿Requiere Guía?</label><br>
        <select id="guia" name="guia" required>
            <option value="si">Sí</option>
            <option value="no">No</option>
        </select><br><br>

        <button onclick="enviar()">Enviar</button>
    </div>

    <script>

        function enviar(){
            
            fetch('{{url}}visitas',
                {headers: {'Content-Type':'application/json'} ,
                method: 'POST',
                body: JSON.stringify({
                    nombre: document.getElementById('nombre').value,
                    email: document.getElementById('email').value,
                    numtel: document.getElementById('numtel').value,
                    fechaVisita: document.getElementById('fechaVisita').value,
                    cantidadPer: document.getElementById('cantidadPer').value,
                    guia: document.getElementById('guia').value,
                    })
                }
            )

            const inputs = document.getElementsByTagName('input')
            console.log(inputs[0])
            for(let i=0 ; i<inputs.length ; i++){
                inputs[i].value = ""
            }

        alert("Su pedido ha sido enviado y será contactado a la brevedad")
                    
        }

    </script>

</body>
</html>